{"ast":null,"code":"var _jsxFileName = \"/workspaces/ai-emotion-journal/frontend/src/components/JournalForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from \"react\";\nimport { API } from \"../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function JournalForm({\n  onNewEntry\n}) {\n  _s();\n  const [text, setText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [listening, setListening] = useState(false);\n  const recognitionRef = useRef(null);\n  const startListening = () => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      alert(\"Speech recognition not supported in this browser!\");\n      return;\n    }\n    const recognition = new SpeechRecognition();\n    recognition.lang = \"en-US\";\n    recognition.onresult = event => {\n      const transcript = event.results[0][0].transcript;\n      setText(prev => (prev ? prev + \" \" : \"\") + transcript);\n    };\n    recognition.onend = () => setListening(false);\n    recognitionRef.current = recognition;\n    recognition.start();\n    setListening(true);\n  };\n  const stopListening = () => {\n    var _recognitionRef$curre;\n    (_recognitionRef$curre = recognitionRef.current) === null || _recognitionRef$curre === void 0 ? void 0 : _recognitionRef$curre.stop();\n    setListening(false);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!text.trim()) return;\n\n    // Instantly add to UI (optimistic update)\n    const tempEntry = {\n      text,\n      emotion: \"Analyzing...\",\n      date: new Date().toISOString().split(\"T\")[0]\n    };\n    onNewEntry(tempEntry);\n    setText(\"\");\n    setLoading(true);\n    try {\n      const res = await API.post(\"/add_entry\", {\n        text\n      });\n      // Replace placeholder entry with actual emotion once backend responds\n      onNewEntry(res.data.entry);\n    } catch {\n      alert(\"Error saving entry\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"p-6 bg-white/80 backdrop-blur-lg shadow-xl rounded-2xl w-full max-w-2xl border border-indigo-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n      className: \"border w-full p-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 bg-white/60\",\n      rows: \"4\",\n      placeholder: \"Write or speak your thoughts...\",\n      value: text,\n      onChange: e => setText(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: listening ? stopListening : startListening,\n        className: `px-5 py-2.5 rounded-lg text-white font-semibold shadow-md ${listening ? \"bg-red-500 hover:bg-red-600\" : \"bg-green-500 hover:bg-green-600\"}`,\n        children: listening ? \"ðŸ›‘ Stop\" : \"ðŸŽ¤ Speak\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        className: \"px-5 py-2.5 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 disabled:opacity-50\",\n        children: loading ? \"Saving...\" : \"ðŸ’¾ Save Entry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(JournalForm, \"DwlPihDdTVCsp5bWzGFVbSwbnpY=\");\n_c = JournalForm;\nvar _c;\n$RefreshReg$(_c, \"JournalForm\");","map":{"version":3,"names":["React","useState","useRef","API","jsxDEV","_jsxDEV","JournalForm","onNewEntry","_s","text","setText","loading","setLoading","listening","setListening","recognitionRef","startListening","SpeechRecognition","window","webkitSpeechRecognition","alert","recognition","lang","onresult","event","transcript","results","prev","onend","current","start","stopListening","_recognitionRef$curre","stop","handleSubmit","e","preventDefault","trim","tempEntry","emotion","date","Date","toISOString","split","res","post","data","entry","onSubmit","className","children","rows","placeholder","value","onChange","target","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","disabled","_c","$RefreshReg$"],"sources":["/workspaces/ai-emotion-journal/frontend/src/components/JournalForm.jsx"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { API } from \"../api\";\n\nexport default function JournalForm({ onNewEntry }) {\n  const [text, setText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [listening, setListening] = useState(false);\n  const recognitionRef = useRef(null);\n\n  const startListening = () => {\n    const SpeechRecognition =\n      window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      alert(\"Speech recognition not supported in this browser!\");\n      return;\n    }\n\n    const recognition = new SpeechRecognition();\n    recognition.lang = \"en-US\";\n    recognition.onresult = (event) => {\n      const transcript = event.results[0][0].transcript;\n      setText((prev) => (prev ? prev + \" \" : \"\") + transcript);\n    };\n    recognition.onend = () => setListening(false);\n    recognitionRef.current = recognition;\n    recognition.start();\n    setListening(true);\n  };\n\n  const stopListening = () => {\n    recognitionRef.current?.stop();\n    setListening(false);\n  };\n\n  const handleSubmit = async (e) => {\n  e.preventDefault();\n  if (!text.trim()) return;\n\n  // Instantly add to UI (optimistic update)\n  const tempEntry = {\n    text,\n    emotion: \"Analyzing...\",\n    date: new Date().toISOString().split(\"T\")[0],\n  };\n  onNewEntry(tempEntry);\n  setText(\"\");\n  setLoading(true);\n\n  try {\n    const res = await API.post(\"/add_entry\", { text });\n    // Replace placeholder entry with actual emotion once backend responds\n    onNewEntry(res.data.entry);\n  } catch {\n    alert(\"Error saving entry\");\n  } finally {\n    setLoading(false);\n  }\n};\n\n\n  return (\n    <form\n      onSubmit={handleSubmit}\n      className=\"p-6 bg-white/80 backdrop-blur-lg shadow-xl rounded-2xl w-full max-w-2xl border border-indigo-100\"\n    >\n      <textarea\n        className=\"border w-full p-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 bg-white/60\"\n        rows=\"4\"\n        placeholder=\"Write or speak your thoughts...\"\n        value={text}\n        onChange={(e) => setText(e.target.value)}\n      />\n      <div className=\"flex justify-between mt-4\">\n        <button\n          type=\"button\"\n          onClick={listening ? stopListening : startListening}\n          className={`px-5 py-2.5 rounded-lg text-white font-semibold shadow-md ${\n            listening\n              ? \"bg-red-500 hover:bg-red-600\"\n              : \"bg-green-500 hover:bg-green-600\"\n          }`}\n        >\n          {listening ? \"ðŸ›‘ Stop\" : \"ðŸŽ¤ Speak\"}\n        </button>\n\n        <button\n          type=\"submit\"\n          disabled={loading}\n          className=\"px-5 py-2.5 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 disabled:opacity-50\"\n        >\n          {loading ? \"Saving...\" : \"ðŸ’¾ Save Entry\"}\n        </button>\n      </div>\n    </form>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}