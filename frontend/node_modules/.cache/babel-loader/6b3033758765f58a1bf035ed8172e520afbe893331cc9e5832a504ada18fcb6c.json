{"ast":null,"code":"var _jsxFileName = \"/workspaces/ai-emotion-journal/frontend/src/components/JournalForm.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef } from \"react\";\nimport { API } from \"../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function JournalForm({\n  onNewEntry\n}) {\n  _s();\n  const [text, setText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [listening, setListening] = useState(false);\n  const recognitionRef = useRef(null);\n  const startListening = () => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      alert(\"Speech recognition not supported in this browser. Use Chrome!\");\n      return;\n    }\n    const recognition = new SpeechRecognition();\n    recognition.lang = \"en-US\";\n    recognition.continuous = false;\n    recognition.onresult = event => {\n      const transcript = event.results[0][0].transcript;\n      setText(prev => (prev ? prev + \" \" : \"\") + transcript);\n    };\n    recognition.onend = () => setListening(false);\n    recognitionRef.current = recognition;\n    recognition.start();\n    setListening(true);\n  };\n  const stopListening = () => {\n    var _recognitionRef$curre;\n    (_recognitionRef$curre = recognitionRef.current) === null || _recognitionRef$curre === void 0 ? void 0 : _recognitionRef$curre.stop();\n    setListening(false);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!text.trim()) return;\n    setLoading(true);\n    try {\n      const res = await API.post(\"/add_entry\", {\n        text\n      });\n      onNewEntry(res.data.entry);\n      setText(\"\");\n    } catch (err) {\n      alert(\"Error saving entry\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"p-4 bg-white rounded-xl shadow w-full max-w-2xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n      className: \"border w-full p-3 rounded-md\",\n      rows: \"4\",\n      placeholder: \"Write or speak your thoughts...\",\n      value: text,\n      onChange: e => setText(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: listening ? stopListening : startListening,\n        className: `px-4 py-2 rounded-md ${listening ? \"bg-red-500\" : \"bg-green-500\"} text-white`,\n        children: listening ? \"Stop\" : \"ðŸŽ¤ Speak\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        className: \"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700\",\n        children: loading ? \"Saving...\" : \"Save Entry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(JournalForm, \"DwlPihDdTVCsp5bWzGFVbSwbnpY=\");\n_c = JournalForm;\nvar _c;\n$RefreshReg$(_c, \"JournalForm\");","map":{"version":3,"names":["useState","useRef","API","jsxDEV","_jsxDEV","JournalForm","onNewEntry","_s","text","setText","loading","setLoading","listening","setListening","recognitionRef","startListening","SpeechRecognition","window","webkitSpeechRecognition","alert","recognition","lang","continuous","onresult","event","transcript","results","prev","onend","current","start","stopListening","_recognitionRef$curre","stop","handleSubmit","e","preventDefault","trim","res","post","data","entry","err","onSubmit","className","children","rows","placeholder","value","onChange","target","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","disabled","_c","$RefreshReg$"],"sources":["/workspaces/ai-emotion-journal/frontend/src/components/JournalForm.jsx"],"sourcesContent":["import { useState, useRef } from \"react\";\nimport { API } from \"../api\";\n\nexport default function JournalForm({ onNewEntry }) {\n  const [text, setText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [listening, setListening] = useState(false);\n  const recognitionRef = useRef(null);\n\n  const startListening = () => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      alert(\"Speech recognition not supported in this browser. Use Chrome!\");\n      return;\n    }\n\n    const recognition = new SpeechRecognition();\n    recognition.lang = \"en-US\";\n    recognition.continuous = false;\n\n    recognition.onresult = (event) => {\n      const transcript = event.results[0][0].transcript;\n      setText((prev) => (prev ? prev + \" \" : \"\") + transcript);\n    };\n\n    recognition.onend = () => setListening(false);\n    recognitionRef.current = recognition;\n    recognition.start();\n    setListening(true);\n  };\n\n  const stopListening = () => {\n    recognitionRef.current?.stop();\n    setListening(false);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!text.trim()) return;\n    setLoading(true);\n    try {\n      const res = await API.post(\"/add_entry\", { text });\n      onNewEntry(res.data.entry);\n      setText(\"\");\n    } catch (err) {\n      alert(\"Error saving entry\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"p-4 bg-white rounded-xl shadow w-full max-w-2xl\">\n      <textarea\n        className=\"border w-full p-3 rounded-md\"\n        rows=\"4\"\n        placeholder=\"Write or speak your thoughts...\"\n        value={text}\n        onChange={(e) => setText(e.target.value)}\n      />\n      <div className=\"flex justify-between mt-3\">\n        <button\n          type=\"button\"\n          onClick={listening ? stopListening : startListening}\n          className={`px-4 py-2 rounded-md ${listening ? \"bg-red-500\" : \"bg-green-500\"} text-white`}\n        >\n          {listening ? \"Stop\" : \"ðŸŽ¤ Speak\"}\n        </button>\n        <button\n          type=\"submit\"\n          disabled={loading}\n          className=\"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700\"\n        >\n          {loading ? \"Saving...\" : \"Save Entry\"}\n        </button>\n      </div>\n    </form>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}