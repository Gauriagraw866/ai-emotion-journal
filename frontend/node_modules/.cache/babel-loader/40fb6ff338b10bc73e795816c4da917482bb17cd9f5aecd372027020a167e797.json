{"ast":null,"code":"var _jsxFileName = \"/workspaces/ai-emotion-journal/frontend/src/components/JournalForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from \"react\";\nimport { addJournalEntry } from \"../api\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function JournalForm({\n  onNewEntry\n}) {\n  _s();\n  const [text, setText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [listening, setListening] = useState(false);\n  const recognitionRef = useRef(null);\n  const startListening = () => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) return toast.error(\"üé§ Speech recognition not supported!\");\n    const recognition = new SpeechRecognition();\n    recognition.lang = \"en-US\";\n    recognition.continuous = false;\n    recognition.onresult = e => setText(prev => prev + \" \" + e.results[0][0].transcript);\n    recognition.onerror = () => toast.error(\"üéôÔ∏è Microphone error!\");\n    recognition.onend = () => setListening(false);\n    recognitionRef.current = recognition;\n    recognition.start();\n    setListening(true);\n    toast.info(\"üéß Listening...\");\n  };\n  const stopListening = () => {\n    var _recognitionRef$curre;\n    (_recognitionRef$curre = recognitionRef.current) === null || _recognitionRef$curre === void 0 ? void 0 : _recognitionRef$curre.stop();\n    setListening(false);\n    toast.info(\"üõë Stopped listening\");\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!text.trim()) return toast.warning(\"‚úçÔ∏è Please write or speak something!\");\n    const tempEntry = {\n      text,\n      emotion: \"Analyzing...\",\n      date: new Date().toISOString().split(\"T\")[0]\n    };\n    onNewEntry(tempEntry);\n    setText(\"\");\n    setLoading(true);\n    try {\n      const result = await addJournalEntry(text);\n      onNewEntry({\n        text,\n        emotion: result.emotion,\n        date: new Date().toISOString().split(\"T\")[0]\n      });\n      toast.success(\"‚úÖ Entry saved!\");\n    } catch {\n      toast.error(\"‚ùå Backend connection failed!\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"p-6 bg-white/70 backdrop-blur-lg rounded-2xl w-full max-w-2xl border border-indigo-100 shadow-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n      className: \"border w-full p-4 rounded-lg focus:ring-2 focus:ring-indigo-400 bg-white/80 placeholder-gray-500 text-gray-800\",\n      rows: \"4\",\n      placeholder: \"Write or speak your thoughts...\",\n      value: text,\n      onChange: e => setText(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: listening ? stopListening : startListening,\n        className: `px-5 py-2.5 rounded-lg text-white font-semibold transition ${listening ? \"bg-red-500 hover:bg-red-600\" : \"bg-green-500 hover:bg-green-600\"}`,\n        children: listening ? \"üõë Stop\" : \"üé§ Speak\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        className: \"px-6 py-2.5 bg-gradient-to-r from-indigo-600 to-pink-600 text-white font-semibold rounded-lg shadow-md hover:opacity-90 disabled:opacity-60\",\n        children: loading ? \"üí´ Saving...\" : \"üíæ Save Entry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"top-right\",\n      autoClose: 1500,\n      theme: \"light\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n_s(JournalForm, \"DwlPihDdTVCsp5bWzGFVbSwbnpY=\");\n_c = JournalForm;\nvar _c;\n$RefreshReg$(_c, \"JournalForm\");","map":{"version":3,"names":["React","useState","useRef","addJournalEntry","toast","ToastContainer","jsxDEV","_jsxDEV","JournalForm","onNewEntry","_s","text","setText","loading","setLoading","listening","setListening","recognitionRef","startListening","SpeechRecognition","window","webkitSpeechRecognition","error","recognition","lang","continuous","onresult","e","prev","results","transcript","onerror","onend","current","start","info","stopListening","_recognitionRef$curre","stop","handleSubmit","preventDefault","trim","warning","tempEntry","emotion","date","Date","toISOString","split","result","success","onSubmit","className","children","rows","placeholder","value","onChange","target","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","disabled","position","autoClose","theme","_c","$RefreshReg$"],"sources":["/workspaces/ai-emotion-journal/frontend/src/components/JournalForm.jsx"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { addJournalEntry } from \"../api\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nexport default function JournalForm({ onNewEntry }) {\n  const [text, setText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [listening, setListening] = useState(false);\n  const recognitionRef = useRef(null);\n\n  const startListening = () => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) return toast.error(\"üé§ Speech recognition not supported!\");\n    const recognition = new SpeechRecognition();\n    recognition.lang = \"en-US\";\n    recognition.continuous = false;\n    recognition.onresult = (e) => setText((prev) => prev + \" \" + e.results[0][0].transcript);\n    recognition.onerror = () => toast.error(\"üéôÔ∏è Microphone error!\");\n    recognition.onend = () => setListening(false);\n    recognitionRef.current = recognition;\n    recognition.start();\n    setListening(true);\n    toast.info(\"üéß Listening...\");\n  };\n\n  const stopListening = () => {\n    recognitionRef.current?.stop();\n    setListening(false);\n    toast.info(\"üõë Stopped listening\");\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!text.trim()) return toast.warning(\"‚úçÔ∏è Please write or speak something!\");\n    const tempEntry = { text, emotion: \"Analyzing...\", date: new Date().toISOString().split(\"T\")[0] };\n    onNewEntry(tempEntry);\n    setText(\"\");\n    setLoading(true);\n    try {\n      const result = await addJournalEntry(text);\n      onNewEntry({\n        text,\n        emotion: result.emotion,\n        date: new Date().toISOString().split(\"T\")[0],\n      });\n      toast.success(\"‚úÖ Entry saved!\");\n    } catch {\n      toast.error(\"‚ùå Backend connection failed!\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form\n      onSubmit={handleSubmit}\n      className=\"p-6 bg-white/70 backdrop-blur-lg rounded-2xl w-full max-w-2xl border border-indigo-100 shadow-lg\"\n    >\n      <textarea\n        className=\"border w-full p-4 rounded-lg focus:ring-2 focus:ring-indigo-400 bg-white/80 placeholder-gray-500 text-gray-800\"\n        rows=\"4\"\n        placeholder=\"Write or speak your thoughts...\"\n        value={text}\n        onChange={(e) => setText(e.target.value)}\n      />\n\n      <div className=\"flex justify-between items-center mt-4\">\n        <button\n          type=\"button\"\n          onClick={listening ? stopListening : startListening}\n          className={`px-5 py-2.5 rounded-lg text-white font-semibold transition ${\n            listening\n              ? \"bg-red-500 hover:bg-red-600\"\n              : \"bg-green-500 hover:bg-green-600\"\n          }`}\n        >\n          {listening ? \"üõë Stop\" : \"üé§ Speak\"}\n        </button>\n\n        <button\n          type=\"submit\"\n          disabled={loading}\n          className=\"px-6 py-2.5 bg-gradient-to-r from-indigo-600 to-pink-600 text-white font-semibold rounded-lg shadow-md hover:opacity-90 disabled:opacity-60\"\n        >\n          {loading ? \"üí´ Saving...\" : \"üíæ Save Entry\"}\n        </button>\n      </div>\n      <ToastContainer position=\"top-right\" autoClose={1500} theme=\"light\" />\n    </form>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}