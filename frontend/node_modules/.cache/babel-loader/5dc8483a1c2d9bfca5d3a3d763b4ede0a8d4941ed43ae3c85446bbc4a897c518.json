{"ast":null,"code":"var _jsxFileName = \"/workspaces/ai-emotion-journal/frontend/src/components/JournalForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from \"react\";\nimport { addJournalEntry } from \"../api\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function JournalForm({\n  onNewEntry\n}) {\n  _s();\n  const [text, setText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [listening, setListening] = useState(false);\n  const recognitionRef = useRef(null);\n\n  // üéôÔ∏è Start voice recording\n  const startListening = () => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      toast.error(\"üé§ Speech recognition not supported in this browser!\");\n      return;\n    }\n    const recognition = new SpeechRecognition();\n    recognition.lang = \"en-US\";\n    recognition.continuous = false;\n    recognition.onresult = event => {\n      const transcript = event.results[0][0].transcript;\n      setText(prev => (prev ? prev + \" \" : \"\") + transcript);\n    };\n    recognition.onerror = err => {\n      console.error(\"Speech error:\", err);\n      toast.error(\"Error with microphone!\");\n      setListening(false);\n    };\n    recognition.onend = () => setListening(false);\n    recognitionRef.current = recognition;\n    recognition.start();\n    setListening(true);\n    toast.info(\"üéß Listening...\");\n  };\n\n  // üõë Stop listening\n  const stopListening = () => {\n    var _recognitionRef$curre;\n    (_recognitionRef$curre = recognitionRef.current) === null || _recognitionRef$curre === void 0 ? void 0 : _recognitionRef$curre.stop();\n    setListening(false);\n    toast.info(\"üõë Stopped listening\");\n  };\n\n  // üíæ Handle Save Entry\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!text.trim()) {\n      toast.warning(\"‚úçÔ∏è Please write or speak something first!\");\n      return;\n    }\n\n    // Temporary instant entry to show on UI\n    const tempEntry = {\n      text,\n      emotion: \"Analyzing...\",\n      date: new Date().toISOString().split(\"T\")[0]\n    };\n    onNewEntry(inputText);\n    // adds instantly to UI\n    setText(\"\"); // clear textarea\n    setLoading(true);\n    try {\n      await API.post(\"/add_entry\", {\n        text\n      }); // send text to backend\n      toast.success(\"‚úÖ Entry saved successfully!\");\n    } catch (error) {\n      console.error(error);\n      toast.error(\"‚ùå Error saving entry. Check backend connection!\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"p-6 bg-white/80 backdrop-blur-lg rounded-2xl w-full max-w-2xl border border-indigo-100 shadow-xl card-glow\",\n    children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n      className: \"border w-full p-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 bg-white/70 placeholder-gray-400\",\n      rows: \"4\",\n      placeholder: \"Write or speak your thoughts...\",\n      value: text,\n      onChange: e => setText(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: listening ? stopListening : startListening,\n        className: `px-5 py-2.5 rounded-lg text-white font-semibold shadow-md flex items-center gap-2 transition ${listening ? \"bg-red-500 hover:bg-red-600\" : \"bg-green-500 hover:bg-green-600\"}`,\n        children: listening ? \"üõë Stop\" : \"üé§ Speak\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        className: \"px-6 py-2.5 bg-gradient-to-r from-indigo-600 to-pink-600 text-white font-semibold rounded-lg shadow-md hover:opacity-90 disabled:opacity-60\",\n        children: loading ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"animate-pulse\",\n          children: \"\\uD83D\\uDCAB Saving...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this) : \"üíæ Save Entry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"top-right\",\n      autoClose: 1500,\n      theme: \"light\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n_s(JournalForm, \"DwlPihDdTVCsp5bWzGFVbSwbnpY=\");\n_c = JournalForm;\nvar _c;\n$RefreshReg$(_c, \"JournalForm\");","map":{"version":3,"names":["React","useState","useRef","addJournalEntry","toast","ToastContainer","jsxDEV","_jsxDEV","JournalForm","onNewEntry","_s","text","setText","loading","setLoading","listening","setListening","recognitionRef","startListening","SpeechRecognition","window","webkitSpeechRecognition","error","recognition","lang","continuous","onresult","event","transcript","results","prev","onerror","err","console","onend","current","start","info","stopListening","_recognitionRef$curre","stop","handleSubmit","e","preventDefault","trim","warning","tempEntry","emotion","date","Date","toISOString","split","inputText","API","post","success","onSubmit","className","children","rows","placeholder","value","onChange","target","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","disabled","position","autoClose","theme","_c","$RefreshReg$"],"sources":["/workspaces/ai-emotion-journal/frontend/src/components/JournalForm.jsx"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { addJournalEntry } from \"../api\";\n\nimport { toast, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nexport default function JournalForm({ onNewEntry }) {\n  const [text, setText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [listening, setListening] = useState(false);\n  const recognitionRef = useRef(null);\n\n  // üéôÔ∏è Start voice recording\n  const startListening = () => {\n    const SpeechRecognition =\n      window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      toast.error(\"üé§ Speech recognition not supported in this browser!\");\n      return;\n    }\n\n    const recognition = new SpeechRecognition();\n    recognition.lang = \"en-US\";\n    recognition.continuous = false;\n\n    recognition.onresult = (event) => {\n      const transcript = event.results[0][0].transcript;\n      setText((prev) => (prev ? prev + \" \" : \"\") + transcript);\n    };\n\n    recognition.onerror = (err) => {\n      console.error(\"Speech error:\", err);\n      toast.error(\"Error with microphone!\");\n      setListening(false);\n    };\n\n    recognition.onend = () => setListening(false);\n    recognitionRef.current = recognition;\n    recognition.start();\n    setListening(true);\n    toast.info(\"üéß Listening...\");\n  };\n\n  // üõë Stop listening\n  const stopListening = () => {\n    recognitionRef.current?.stop();\n    setListening(false);\n    toast.info(\"üõë Stopped listening\");\n  };\n\n  // üíæ Handle Save Entry\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!text.trim()) {\n      toast.warning(\"‚úçÔ∏è Please write or speak something first!\");\n      return;\n    }\n\n    // Temporary instant entry to show on UI\n    const tempEntry = {\n      text,\n      emotion: \"Analyzing...\",\n      date: new Date().toISOString().split(\"T\")[0],\n    };\n    onNewEntry(inputText);\n// adds instantly to UI\n    setText(\"\"); // clear textarea\n    setLoading(true);\n\n    try {\n      await API.post(\"/add_entry\", { text }); // send text to backend\n      toast.success(\"‚úÖ Entry saved successfully!\");\n    } catch (error) {\n      console.error(error);\n      toast.error(\"‚ùå Error saving entry. Check backend connection!\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form\n      onSubmit={handleSubmit}\n      className=\"p-6 bg-white/80 backdrop-blur-lg rounded-2xl w-full max-w-2xl border border-indigo-100 shadow-xl card-glow\"\n    >\n      {/* Text Input Area */}\n      <textarea\n        className=\"border w-full p-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 bg-white/70 placeholder-gray-400\"\n        rows=\"4\"\n        placeholder=\"Write or speak your thoughts...\"\n        value={text}\n        onChange={(e) => setText(e.target.value)}\n      />\n\n      {/* Buttons */}\n      <div className=\"flex justify-between items-center mt-4\">\n        {/* üé§ Voice Input Button */}\n        <button\n          type=\"button\"\n          onClick={listening ? stopListening : startListening}\n          className={`px-5 py-2.5 rounded-lg text-white font-semibold shadow-md flex items-center gap-2 transition ${\n            listening\n              ? \"bg-red-500 hover:bg-red-600\"\n              : \"bg-green-500 hover:bg-green-600\"\n          }`}\n        >\n          {listening ? \"üõë Stop\" : \"üé§ Speak\"}\n        </button>\n\n        {/* üíæ Save Entry Button */}\n        <button\n          type=\"submit\"\n          disabled={loading}\n          className=\"px-6 py-2.5 bg-gradient-to-r from-indigo-600 to-pink-600 text-white font-semibold rounded-lg shadow-md hover:opacity-90 disabled:opacity-60\"\n        >\n          {loading ? (\n            <span className=\"animate-pulse\">üí´ Saving...</span>\n          ) : (\n            \"üíæ Save Entry\"\n          )}\n        </button>\n      </div>\n\n      {/* Toast Notifications */}\n      <ToastContainer position=\"top-right\" autoClose={1500} theme=\"light\" />\n    </form>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}