{"ast":null,"code":"var _jsxFileName = \"/workspaces/ai-emotion-journal/frontend/src/components/JournalForm.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from \"react\";\nimport { API } from \"../api\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function JournalForm({\n  onNewEntry\n}) {\n  _s();\n  const [text, setText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [listening, setListening] = useState(false);\n  const recognitionRef = useRef(null);\n  const startListening = () => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      toast.error(\"Speech recognition not supported in this browser!\");\n      return;\n    }\n    const recognition = new SpeechRecognition();\n    recognition.lang = \"en-US\";\n    recognition.onresult = event => {\n      const transcript = event.results[0][0].transcript;\n      setText(prev => (prev ? prev + \" \" : \"\") + transcript);\n    };\n    recognition.onend = () => setListening(false);\n    recognitionRef.current = recognition;\n    recognition.start();\n    setListening(true);\n  };\n  const stopListening = () => {\n    var _recognitionRef$curre;\n    (_recognitionRef$curre = recognitionRef.current) === null || _recognitionRef$curre === void 0 ? void 0 : _recognitionRef$curre.stop();\n    setListening(false);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!text.trim()) return;\n    const tempEntry = {\n      text,\n      emotion: \"Analyzing...\",\n      date: new Date().toISOString().split(\"T\")[0]\n    };\n    onNewEntry(tempEntry);\n    setText(\"\");\n    setLoading(true);\n    try {\n      const res = await API.post(\"/add_entry\", {\n        text\n      });\n      onNewEntry(res.data.entry);\n      toast.success(\"‚úÖ Entry saved!\");\n    } catch {\n      toast.error(\"‚ùå Error saving entry\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"p-6 bg-white/80 backdrop-blur-lg rounded-2xl w-full max-w-2xl border border-indigo-100 shadow-xl card-glow\",\n    children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n      className: \"border w-full p-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 bg-white/60\",\n      rows: \"4\",\n      placeholder: \"Write or speak your thoughts...\",\n      value: text,\n      onChange: e => setText(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: listening ? stopListening : startListening,\n        className: `px-5 py-2.5 rounded-lg text-white font-semibold shadow-md ${listening ? \"bg-red-500 hover:bg-red-600\" : \"bg-green-500 hover:bg-green-600\"}`,\n        children: listening ? \"üõë Stop\" : \"üé§ Speak\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        className: \"px-5 py-2.5 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 disabled:opacity-50\",\n        children: loading ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"animate-pulse\",\n          children: \"\\uD83D\\uDCAB Saving...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 22\n        }, this) : \"üíæ Save Entry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n      position: \"top-right\",\n      autoClose: 1500\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(JournalForm, \"DwlPihDdTVCsp5bWzGFVbSwbnpY=\");\n_c = JournalForm;\nvar _c;\n$RefreshReg$(_c, \"JournalForm\");","map":{"version":3,"names":["React","useState","useRef","API","toast","ToastContainer","jsxDEV","_jsxDEV","JournalForm","onNewEntry","_s","text","setText","loading","setLoading","listening","setListening","recognitionRef","startListening","SpeechRecognition","window","webkitSpeechRecognition","error","recognition","lang","onresult","event","transcript","results","prev","onend","current","start","stopListening","_recognitionRef$curre","stop","handleSubmit","e","preventDefault","trim","tempEntry","emotion","date","Date","toISOString","split","res","post","data","entry","success","onSubmit","className","children","rows","placeholder","value","onChange","target","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","disabled","position","autoClose","_c","$RefreshReg$"],"sources":["/workspaces/ai-emotion-journal/frontend/src/components/JournalForm.jsx"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { API } from \"../api\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nexport default function JournalForm({ onNewEntry }) {\n  const [text, setText] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [listening, setListening] = useState(false);\n  const recognitionRef = useRef(null);\n\n  const startListening = () => {\n    const SpeechRecognition =\n      window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      toast.error(\"Speech recognition not supported in this browser!\");\n      return;\n    }\n\n    const recognition = new SpeechRecognition();\n    recognition.lang = \"en-US\";\n    recognition.onresult = (event) => {\n      const transcript = event.results[0][0].transcript;\n      setText((prev) => (prev ? prev + \" \" : \"\") + transcript);\n    };\n    recognition.onend = () => setListening(false);\n    recognitionRef.current = recognition;\n    recognition.start();\n    setListening(true);\n  };\n\n  const stopListening = () => {\n    recognitionRef.current?.stop();\n    setListening(false);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!text.trim()) return;\n\n    const tempEntry = {\n      text,\n      emotion: \"Analyzing...\",\n      date: new Date().toISOString().split(\"T\")[0],\n    };\n    onNewEntry(tempEntry);\n    setText(\"\");\n    setLoading(true);\n\n    try {\n      const res = await API.post(\"/add_entry\", { text });\n      onNewEntry(res.data.entry);\n      toast.success(\"‚úÖ Entry saved!\");\n    } catch {\n      toast.error(\"‚ùå Error saving entry\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form\n      onSubmit={handleSubmit}\n      className=\"p-6 bg-white/80 backdrop-blur-lg rounded-2xl w-full max-w-2xl border border-indigo-100 shadow-xl card-glow\"\n    >\n      <textarea\n        className=\"border w-full p-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 bg-white/60\"\n        rows=\"4\"\n        placeholder=\"Write or speak your thoughts...\"\n        value={text}\n        onChange={(e) => setText(e.target.value)}\n      />\n      <div className=\"flex justify-between mt-4\">\n        <button\n          type=\"button\"\n          onClick={listening ? stopListening : startListening}\n          className={`px-5 py-2.5 rounded-lg text-white font-semibold shadow-md ${\n            listening\n              ? \"bg-red-500 hover:bg-red-600\"\n              : \"bg-green-500 hover:bg-green-600\"\n          }`}\n        >\n          {listening ? \"üõë Stop\" : \"üé§ Speak\"}\n        </button>\n\n        <button\n          type=\"submit\"\n          disabled={loading}\n          className=\"px-5 py-2.5 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 disabled:opacity-50\"\n        >\n          {loading ? <span className=\"animate-pulse\">üí´ Saving...</span> : \"üíæ Save Entry\"}\n        </button>\n      </div>\n      <ToastContainer position=\"top-right\" autoClose={1500} />\n    </form>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}